---
title: "Big Picture"
description: "A 538/Upshot style article about the data."
toc: true
draft: FALSE
---

![](images/The_Big_Picture_2.jpeg)
## Investigating Mental Health as a Virtue of the Pandemic and Other Demographic Factors 

### Introduction
The pandemic placed many burdens on our society. People were socially isolated, and financially burdened, due to unemployment as well as reduced overall income. We also know that these disproportionately affected people due to their demographic factors, i.e., the state that they live in or the race that they are. All of these factors collectively therefore had an impact on people’s mental health. This study therefore set out to investigate the impact of the pandemic on the 

## Thesis: 
We believe that as unemployment increases, and income decreases, due to the pandemic, mental health scores for anxiety and depression will increase, and so will seeking mental health resources. This is why we compare the data from 2020 to 2022 to see if these got better in a post-lockdown world. 

## Data and Methodology
We have brought together data from the CDC, regarding mental health, and data on unemployment, education levels and GDP from the U.S. Bureau of Labor Statistics. By analyzing these variables, we hope to be able to understand variables that impacted people’s mental health during the COVID-19 pandemic. Below, we have graphed each demographic variable with the average percent of people who required mental health intervention (as indicated by the variable “Took Prescription Medication for Mental Health And/Or Received Counseling or Therapy, Last 4 Weeks”). 


The x-value “Time Period” is a measure of 2-week phases, therefore 20 is 40 weeks from when they first started collecting data. The time period spans across an overall 90 week period. Thus, the first data obtain is on Aug 31, 2020, time period 30 is May 24, 2021, and the time data is on May 9, 2022. We can see for all indicator, the average value of the mental problem is increase along the time.

### detailed data summary

For all the following analyze, we are focus on the indicator "Took Prescription Medication for Mental Health And/Or Received Counseling or Therapy, Last 4 Weeks" 

#### general summary
```{r,echo=FALSE}

library(dplyr)
library(knitr)


data <- readRDS("dataset/cleaned_dataset.rds")

filtered_data <- data %>%
  filter(Group == "By State", 
         Indicator == "Took Prescription Medication for Mental Health And/Or Received Counseling or Therapy, Last 4 Weeks") %>%
  group_by(State) %>%
  mutate(Average_Value = mean(Value, na.rm = TRUE))




calculate_stats <- function(df, column) {
  df %>%
    summarise(
      Min = min({{column}}, na.rm = TRUE),
      Max = max({{column}}, na.rm = TRUE),
      Mean = mean({{column}}, na.rm = TRUE)
    )
}

# Generate stats for various categories
race_stats <- data_race %>%
  group_by(Subgroup) %>%
  do(calculate_stats(., Value))

sex_stats <- data_sex %>%
  group_by(Subgroup) %>%
  do(calculate_stats(., Value))

education_stats <- data_education %>%
  group_by(Subgroup) %>%
  do(calculate_stats(., Value))

age_stats <- data_age_summary %>%
  do(calculate_stats(., Average_Value))


state_stats <- data_state_avg %>%
  do(calculate_stats(., Average_Value))

# Combine all stats into one table
all_stats <- bind_rows(
  race_stats %>% mutate(Variable = paste(Subgroup, "along time")),
  sex_stats %>% mutate(Variable = paste(Subgroup, "along time")),
  education_stats %>% mutate(Variable = paste(Subgroup, "along time")),
  age_stats%>%mutate(Variable = "age"),
  state_stats%>%mutate(Variable = "state")
) %>%
  select(Variable, Min, Max, Mean)

# Print the table
all_stats<-all_stats[c("Variable", "Min", "Max", "Mean")]
kable(all_stats)



```


#### race
```{r,echo=FALSE}
p_race_avg
p_race_t
```
There is a difference in the average mental health scores between the races. From this graph, one case see that the race with the lowest mental health scores (engagement with mental health interventions), is Asian. It is then followed by Black, then Hispanic or Latino. And the races with the highest mental health scores are White and other race or multiple races. If you look at these values across time the order of these races in terms of mental health scores stay the same, but there are large variations among the Asian participants and the other races or multiple races. These two groups, as well as White participants, seem to have an increase in their mental health scores across time.

#### sex
```{r,echo=FALSE}
p_sex_avg
p_sex_t
```
There is a difference in the average mental health values between males and females. Across, time this difference remains equally prominent with females overall having higher mental health scores than males. This suggests that more females than males used mental health services. However, much like the other variables, there was a slight increase across time 

#### education level
```{r,echo=FALSE}
p_edu_avg
p_edu_t
```
It appears that there is some variation in use of mental health interventions across education levels. It appears people with greater education levels seem to have poorer mental health, however this could be correlated with age or other more significant factors. Interestingly, there seems to be great variation in the correlation between education levels and mental health across the 90-week period, as indicated by the second graph. But, in general, the percentage of people who require mental health intervention increases over time. 

#### age
```{r,echo=FALSE}
p_age_avg
```
As one can see, there is a clear negative correlation between the percentage of people who required mental health intervention and age group, indicating as age increased the need for mental health resources (and the impact of mental health) decreased. One could say perhaps the younger population was more impacted by the social isolation that the COVID-19 posed.

#### unemployment rate:

by time across the USA:
```{r, echo=FALSE}
# Load necessary libraries
library(dplyr)
library(lubridate)

filtered_data <- data %>%
  filter(Group == "National Estimate", 
         Indicator == "Took Prescription Medication for Mental Health And/Or Received Counseling or Therapy, Last 4 Weeks")

unrate_data <- read_csv("~/final-project-group-11/dataset/UNRATE.csv",col_types = cols(
  DATE = col_date(format = ""),
  UNRATE = col_double()
))

filtered_data <- filtered_data %>%
  mutate(
    Month = match(substr(`Time Period Label`, 1, 3), month.abb),
    Year = as.integer(substr(`Time Period Label`, nchar(`Time Period Label`)-3, nchar(`Time Period Label`)))
  )

unrate_data <- unrate_data %>%
  mutate(
    Year = year(DATE),
    Month = month(DATE)
  )

un_time_data <- left_join(filtered_data, unrate_data, by = c("Year", "Month"))

un_time_data <- un_time_data %>%
  select(Indicator, Group, `Time Period`, `Time Period Label`, Year, Month, Value, UNRATE)

ggplot(un_time_data, aes(x = UNRATE, y = Value)) +
  geom_point() +
  labs(title = "Average Value by unemployment rate, observation per half month time",
       x = "Unemployment rate",
       y = "Value")


```
The unemployment rate by time vs the value shows a clear trend that when the unemployment rate is high, the mental health of whole country seems to be better.

By state, average of all time:
```{r,echo=FALSE}
data <- readRDS("dataset/cleaned_dataset.rds")
unemployment_data <- readRDS("dataset/clean_unemployment.rds")

# Filter the main dataset for the specific indicator and for state-level data
filtered_data <- data %>%
  filter(Group == "By State", 
         Indicator == "Took Prescription Medication for Mental Health And/Or Received Counseling or Therapy, Last 4 Weeks") %>%
  group_by(State) %>%
  summarize(Average_Value = mean(Value, na.rm = TRUE))

# Prepare the unemployment data
# Assuming the unemployment data contains columns 'State' and 'Average'
unemployment_data_state <- unemployment_data %>%
  rename(State = state) %>%
  group_by(State) %>%
  summarize(Average_Unemployment = mean(Average, na.rm = TRUE))

# Merge the datasets
combined_data <- left_join(filtered_data, unemployment_data_state, by = "State")

# Generate the plot
ggplot(combined_data, aes(x = Average_Unemployment, y = Average_Value, label = State)) +
  geom_point() +
  #geom_text(check_overlap = TRUE, hjust = 1.5, vjust = 1.5) +
  labs(title = "State-wise Comparison of Mental Health Indicator and Unemployment Rate",
       x = "Average Unemployment Rate (%)",
       y = "Average Value of Mental Health Indicator") +
  theme_minimal()
# Continue from the previous combined dataset
# Assuming combined_data contains the necessary merged data

# Classify states based on unemployment rate
median_unemployment_rate <- median(combined_data$Average_Unemployment, na.rm = TRUE)

# Classify states based on the median unemployment rate
combined_data <- combined_data %>%
  mutate(Unemployment_Rate_Category = ifelse(Average_Unemployment < median_unemployment_rate, "< 5.13", ">= 5.13"))


# Calculate mean values for each category
category_means <- combined_data %>%
  group_by(Unemployment_Rate_Category) %>%
  summarize(Mean_Indicator_Value = mean(Average_Value, na.rm = TRUE))

# Generate the bar plot
ggplot(category_means, aes(x = Unemployment_Rate_Category, y = Mean_Indicator_Value, fill = Unemployment_Rate_Category)) +
  geom_bar(stat = "identity") +
  labs(title = "Mean Mental Health Indicator Value by Unemployment Rate Category",
       x = "Unemployment Rate Category",
       y = "Mean Indicator Value") +
  theme_minimal() +
  scale_fill_brewer(palette = "Pastel1") # Optional: for better color distinction
```
The unemployment rate by state vs the value also shows a trend that the lower unemployment rate in fact increase the mental health problem. The bar chart is divided by the median of the unemployment rate(5.5%), it also shows that the higher unemployment rate usually indicate a better mental health





This comes from the file `big_picture.Rmd`.

Think of this page as your 538/Upshot style article. This means that you should try to tell a story through the data and your analysis. Read articles from those sites and similar sites to get a feeling for what they are like. Try to write in the style of a news or popular article. Importantly, this pge should be geared towards the general public. You shouldn't assume the reader understands how to interpret a linear regression. Focus on interpretation and visualizations.

---

## Rubric: On this page

You will

* Title
  * Your big picture page should have a creative/click-bait-y title/headline that provides a hint about your thesis.
* Clarity of Explanation
  * You should have a clear thesis/goal for this page. What are you trying to show? Make sure that you explain your analysis in detail but don't go into top much mathematics or statistics. The audience for this page is the general public (to the extent possible). Your thesis should be a statement, not a question.
  * Each figure should be very polished and also not too complicated. There should be a clear interpretation of the figure so the figure has a clear purpose. Even something like a histogram can be difficult to interpret for non-experts.
* Creativity
  * Do your best to make things interesting. Think of a story. Think of how each part of your analysis supports the previous part or provides a different perspective.
* This page should be self-contained.
  
**Note**: This page should have no code visible, i.e. use `#| echo: FALSE`.  

---

## Rubric: Other components

### Interactive

You will also be required to make an interactive dashboard like [this one](/flex/flex.html).

Your Big Data page should include a link to an interactive dashboard. The dashboard should be created either using Shiny or FlexDashboard (or another tool with professor's approval). This interactive component should in some way support your thesis from your big picture page. Good interactives often provide both high-level understanding of the data while allowing a user to investigate specific scenarios, observations, subgroups, etc.

* Quality and ease of use of the interactive components.
Is it clear what can be explored using your interactive components?
Does it enhance and reinforce your conclusions from the Big Picture?
Plotly with default hover text will get no credit. Be creative!


### Video Recording

Make a video recording (probably using Zoom) demonstrating your interactive components.
You should provide a quick explanation of your data and demonstrate some of the conclusions from your EDA.
This video should be no longer than 4 minutes.
Include a link to your video (and password if needed) in your README.md file on your Github repository. You are not required to provide a link on the website.
This can be presented by any subset of the team members.


### Rest of the Site

Finally, here are important things to keep in mind for the rest of the site. 

The main title of your page is informative.
Each post has an author/description/informative title.
All lab required posts are present.
Each page (including the home page) has a nice featured image associated with it.
Your about page is up to date and clean.
You have removed the generic posts from the initial site template.
